# POD

- 가장 작은 배포 단위
- 여러 개 또는 하나의 컨테이너로 구성된 컨테이너 집합
- shared storage 도 있고 네트워크 리소스도 있고 컨테이너를 어떻게 운영할지에 대한 스펙도 있다
- READY 1/1 : 1개의 컨테이너가 정의돼 있으며 이 컨테이너가 정상 준비되었다는 것
    - 2/2, 3/3 : 여러 개의 컨테이너가 띄어 있을 때

![image](https://github.com/bong6981/kube-study/assets/73228803/b630bb06-e931-43d0-ad7e-df4c505963df)
![image](https://github.com/bong6981/kube-study/assets/73228803/d063dcae-2111-4f91-8dc9-452030681908)



- 여러 개로 구성할 때도, 긴밀하게 연결 ( 자원 공유, 하나의 어플레케이션을 구성할 때 주로 사용 ) 될 때 사용
- Pod끼리는 자원을 공유한다
    - 공유 네임스페이스와 공유 파일 시스템 볼륨을 갖는 컨테이너 세트
- 하나의 파드가 일반적으로 하나의 어플리케이션을 호스팅
    - 하나의 파드에 여러 개의 컨테이너가 있을 때 주로 다른 것은 기능 확장을 위한 추가 컨테이너이며, 이런 부가적인 컨테이너를 `사이드카 컨테이너`라고 부른다.
- 여러 개의 컨테이너가 하나의 완전한 애플리케이션으로 동작한다는 점에서 단일한 컨테이너와 차이가 있다

### 네임스페이스

- 리눅스 네임스페이스는 시스템 자원을 분할하여 여러 그룹 간에 격리를 제공하는 방법
- 쿠버네틱스 네임스페이스와는 다름
    - 리눅스의 네임스페이스는 주로 프로세스와 시스템 리소스의 격리에 사용되고
    - 쿠버네티스의 네임스페이스는 클러스터 리소스의 그룹화와 격리에 사용
        - 파드, 레플리카셋, 디플로이먼트, 서비스 등의 쿠버네티스 리소스들이 묶여 있는 하나의 가상 공간

# REPLICASET

- 일반적으로 여러 개의 동일한 컨테이너를 생성한 뒤 외부 요청을 각 컨테이너에 적절히 분배한다
- 이 때 이 동일한 컨테이너를 생성하고 관리하는 방식이 리플리카
- 주요 업무
    - 항상 일정 수의 파드가 유지되게 해준다
    - 노드 장애로 파드를 사용할 수 없으면 다른 노드에서 파드를 생성
- 새로운 파드를 생성할 때 파드 템플릿을 사용한다 (pod template )

# DEPLOYMENT

- 레플리카 셋의 상위 오브젝트
- 디플로이먼트 생성하면 대응하는 레플리카 셋도 자동 생성 된다
- 디플로이먼트는 파드와 레플리카 셋의 스펙을 정의
    - 디플로이먼트 컨트롤러가 행당 스펙에 맞게 파드와 레플리카 셋을 조정
- 컨테이너 애플리케이션을 배포하고 관리하는 역할

# SERVICE

- 파드를 연결하고 외부에 노출
- 종류
    - Cluster IP
        - 클러스터  내부 IP 에만 노출
        - 클러스터 내에서만 접근 가능
        - 타입 지정 안했을 때 디폴트
    - Node Port
        - 각 노드의 IP 노출
        - 해당 IP 와 특정 포트로 서비스 접근
        - 개발 환경에서
    - 로드 밸런서
        - 외부 로드 밸런서를 통해 노출
        - 쿠버네티스 자체 제공은 없어 별도의 로드 밸런서 사용 해야 함
    - ExternalName
        - 호스트 네임  `api.foo.bar.example` 으로 서비스 노출

# Object

- 쿠버네티스는 리소스를 ‘오브젝트’로 관리한다
- 위의 pod, service 등도 전부 오브젝트

## 마스터노드, 워커노드

- 마스터 노드 : 쿠버네티스가 제도로 동작할 수 있게 클러스터 관리
    - API 서버
    - 컨트롤러 매니저
    - 스케줄러
    - DNS 서버
- 워커노드: 어플리케이션 컨테이너가 생성된다
- 네트워크 : 프록시(kube-proxy),  네트워크 플러그인
![image](https://github.com/bong6981/kube-study/assets/73228803/036d5da7-fe6b-490c-8cbd-3eaac84d66d0)
